? .colordiff.pl.swp[0;0m
? colordiff-colors.patch[0;0m
? colordiff_1.0.5-1.diff.gz[0;0m
? cvs.diffy[0;0m
? foo1[0;0m
? foo2[0;0m
? plain.diffy[0;0m
Index: .cvsignore[0;0m
===================================================================[0;0m
RCS file: /cvsroot/colordiff/colordiff/src/Attic/.cvsignore,v[0;0m
retrieving revision 1.1.2.2[0;0m
diff --side-by-side -r1.1.2.2 .cvsignore[0;0m
colordiff.1                                                     colordiff.1[0;0m
                                                              > cdiff.1[0;0m
README                                                          README[0;0m
Index: Makefile[0;0m
===================================================================[0;0m
RCS file: /cvsroot/colordiff/colordiff/src/Makefile,v[0;0m
retrieving revision 1.2.2.12[0;0m
diff --side-by-side -r1.2.2.12 Makefile[0;0m
# $Id: Makefile,v 1.2.2.12 2005/03/28 21:07:03 daveewart Exp  <[0;0m
                                                              <[0;0m
INSTALL_DIR=/usr/local/bin                                      INSTALL_DIR=/usr/local/bin[0;0m
MAN_DIR=/usr/local/man/man1                                     MAN_DIR=/usr/local/man/man1[0;0m
ETC_DIR=/etc                                                    ETC_DIR=/etc[0;0m
VERSION=1.0.5                                                 | VERSION=1.0.6[0;0m
DIST_FILES=COPYING INSTALL Makefile README \                    DIST_FILES=COPYING INSTALL Makefile README \[0;0m
        colordiff.pl colordiffrc colordiffrc-lightbg cdiff.sh |         colordiff.pl colordiffrc colordiffrc-lightbg cdiff.sh[0;0m
                                                              >         colordiff.xml cdiff.xml[0;0m
TMPDIR=colordiff-${VERSION}                                     TMPDIR=colordiff-${VERSION}[0;0m
TARBALL=${TMPDIR}.tar.gz                                        TARBALL=${TMPDIR}.tar.gz[0;0m
[0;0m
[0;0m
doc: colordiff.xml                                            | doc: colordiff.xml cdiff.xml[0;0m
        xmlto -vv man colordiff.xml                                     xmlto -vv man colordiff.xml[0;0m
                                                              >         xmlto -vv man cdiff.xml[0;0m
        xmlto -vv txt colordiff.xml                                     xmlto -vv txt colordiff.xml[0;0m
        xmlto -vv html-nochunks colordiff.xml                           xmlto -vv html-nochunks colordiff.xml[0;0m
        mv colordiff.txt README                                         mv colordiff.txt README[0;0m
        perl -p -i -e 's#<head>#<head><link rel=\"stylesheet\           perl -p -i -e 's#<head>#<head><link rel=\"stylesheet\[0;0m
        perl -p -i -e 's#</body>#</div></body>#' colordiff.ht           perl -p -i -e 's#</body>#</div></body>#' colordiff.ht[0;0m
        perl -p -i -e 's#<div class=\"refentry\"#<div id=\"co           perl -p -i -e 's#<div class=\"refentry\"#<div id=\"co[0;0m
        mv colordiff.html ../htdocs                                     mv colordiff.html ../htdocs[0;0m
[0;0m
etc:                                                            etc:[0;0m
        sed -e "s%/etc%$(ETC_DIR)%g" colordiff.pl > colordiff           sed -e "s%/etc%$(ETC_DIR)%g" colordiff.pl > colordiff[0;0m
[0;0m
install: etc                                                    install: etc[0;0m
        install -D colordiff.pl.for.install ${INSTALL_DIR}/co           install -D colordiff.pl.for.install ${INSTALL_DIR}/co[0;0m
        if [ ! -f ${INSTALL_DIR}/cdiff ] ; then \                       if [ ! -f ${INSTALL_DIR}/cdiff ] ; then \[0;0m
          install cdiff.sh ${INSTALL_DIR}/cdiff; \                        install cdiff.sh ${INSTALL_DIR}/cdiff; \[0;0m
        fi                                                              fi[0;0m
        install -D colordiff.1 ${MAN_DIR}/colordiff.1                   install -D colordiff.1 ${MAN_DIR}/colordiff.1[0;0m
        if [ -f ${ETC_DIR}/colordiffrc ]; then \                        if [ -f ${ETC_DIR}/colordiffrc ]; then \[0;0m
          mv -f ${ETC_DIR}/colordiffrc ${ETC_DIR}/colordiffrc             mv -f ${ETC_DIR}/colordiffrc ${ETC_DIR}/colordiffrc[0;0m
        fi                                                              fi[0;0m
        cp colordiffrc ${ETC_DIR}/colordiffrc                           cp colordiffrc ${ETC_DIR}/colordiffrc[0;0m
        chown root.root ${ETC_DIR}/colordiffrc                          chown root.root ${ETC_DIR}/colordiffrc[0;0m
        chmod 644 ${ETC_DIR}/colordiffrc                                chmod 644 ${ETC_DIR}/colordiffrc[0;0m
        rm -f colordiff.pl.for.install                                  rm -f colordiff.pl.for.install[0;0m
[0;0m
dist:                                                           dist:[0;0m
        mkdir ${TMPDIR}                                                 mkdir ${TMPDIR}[0;0m
        cp -p ${DIST_FILES} ${TMPDIR}                                   cp -p ${DIST_FILES} ${TMPDIR}[0;0m
        tar -zcvf ${TARBALL} ${TMPDIR}                                  tar -zcvf ${TARBALL} ${TMPDIR}[0;0m
        rm -fR ${TMPDIR}                                                rm -fR ${TMPDIR}[0;0m
[0;0m
clean:                                                          clean:[0;0m
        rm -f README colordiff.1 colordiff.html               |         rm -f README colordiff.1 colordiff.html cdiff.1[0;0m
Index: colordiff.pl[0;0m
===================================================================[0;0m
RCS file: /cvsroot/colordiff/colordiff/src/colordiff.pl,v[0;0m
retrieving revision 1.4.2.12[0;0m
diff --side-by-side -r1.4.2.12 colordiff.pl[0;0m
#!/usr/bin/perl -w                                              #!/usr/bin/perl -w[0;0m
#                                                             <[0;0m
# $Id: colordiff.pl,v 1.4.2.12 2005/03/28 20:11:34 daveewart  <[0;0m
[0;0m
#############################################################   #############################################################[0;0m
#                                                               #                                                            [0;0m
# ColorDiff - a wrapper/replacment for 'diff' producing         # ColorDiff - a wrapper/replacment for 'diff' producing      [0;0m
#             colourful output                                  #             colourful output                               [0;0m
#                                                               #                                                            [0;0m
# Copyright (C)2002-2004 Dave Ewart (davee@sungate.co.uk)     | # Copyright (C)2002-2006 Dave Ewart (davee@sungate.co.uk)    [0;0m
#                                                               #                                                            [0;0m
#############################################################   #############################################################[0;0m
#                                                               #                                                            [0;0m
# This program is free software; you can redistribute it and/   # This program is free software; you can redistribute it and/[0;0m
# it under the terms of the GNU General Public License as pub   # it under the terms of the GNU General Public License as pub[0;0m
# the Free Software Foundation; either version 2 of the Licen   # the Free Software Foundation; either version 2 of the Licen[0;0m
# (at your option) any later version.                           # (at your option) any later version.                        [0;0m
#                                                               #                                                            [0;0m
# This program is distributed in the hope that it will be use   # This program is distributed in the hope that it will be use[0;0m
# but WITHOUT ANY WARRANTY; without even the implied warranty   # but WITHOUT ANY WARRANTY; without even the implied warranty[0;0m
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See t   # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See t[0;0m
# GNU General Public License for more details.                  # GNU General Public License for more details.               [0;0m
#                                                               #                                                            [0;0m
# You should have received a copy of the GNU General Public L <[0;0m
# along with this program; if not, write to the Free Software <[0;0m
# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.   <[0;0m
#                                                             <[0;0m
#############################################################   #############################################################[0;0m
[0;0m
use strict;                                                     use strict;[0;0m
use Getopt::Long qw(:config pass_through);                      use Getopt::Long qw(:config pass_through);[0;0m
use IPC::Open2;                                                 use IPC::Open2;[0;0m
[0;0m
my $app_name     = 'colordiff';                                 my $app_name     = 'colordiff';[0;0m
my $version      = '1.0.5';                                   | my $version      = '1.0.6';[0;0m
my $author       = 'Dave Ewart';                                my $author       = 'Dave Ewart';[0;0m
my $author_email = 'davee@sungate.co.uk';                       my $author_email = 'davee@sungate.co.uk';[0;0m
my $app_www      = 'http://colordiff.sourceforge.net/';         my $app_www      = 'http://colordiff.sourceforge.net/';[0;0m
my $copyright    = '(C)2002-2005';                            | my $copyright    = '(C)2002-2006';[0;0m
my $show_banner  = 1;                                           my $show_banner  = 1;[0;0m
[0;0m
# ANSI sequences for colours                                    # ANSI sequences for colours[0;0m
my %colour;                                                     my %colour;[0;0m
$colour{white}       = "\033[1;37m";                            $colour{white}       = "\033[1;37m";[0;0m
$colour{yellow}      = "\033[1;33m";                            $colour{yellow}      = "\033[1;33m";[0;0m
$colour{green}       = "\033[1;32m";                            $colour{green}       = "\033[1;32m";[0;0m
$colour{blue}        = "\033[1;34m";                            $colour{blue}        = "\033[1;34m";[0;0m
$colour{cyan}        = "\033[1;36m";                            $colour{cyan}        = "\033[1;36m";[0;0m
$colour{red}         = "\033[1;31m";                            $colour{red}         = "\033[1;31m";[0;0m
$colour{magenta}     = "\033[1;35m";                            $colour{magenta}     = "\033[1;35m";[0;0m
$colour{black}       = "\033[1;30m";                            $colour{black}       = "\033[1;30m";[0;0m
$colour{darkwhite}   = "\033[0;37m";                            $colour{darkwhite}   = "\033[0;37m";[0;0m
$colour{darkyellow}  = "\033[0;33m";                            $colour{darkyellow}  = "\033[0;33m";[0;0m
$colour{darkgreen}   = "\033[0;32m";                            $colour{darkgreen}   = "\033[0;32m";[0;0m
$colour{darkblue}    = "\033[0;34m";                            $colour{darkblue}    = "\033[0;34m";[0;0m
$colour{darkcyan}    = "\033[0;36m";                            $colour{darkcyan}    = "\033[0;36m";[0;0m
$colour{darkred}     = "\033[0;31m";                            $colour{darkred}     = "\033[0;31m";[0;0m
$colour{darkmagenta} = "\033[0;35m";                            $colour{darkmagenta} = "\033[0;35m";[0;0m
$colour{darkblack}   = "\033[0;30m";                            $colour{darkblack}   = "\033[0;30m";[0;0m
$colour{OFF}         = "\033[0;0m";                             $colour{OFF}         = "\033[0;0m";[0;0m
[0;0m
# Default colours if /etc/colordiffrc or ~/.colordiffrc do no   # Default colours if /etc/colordiffrc or ~/.colordiffrc do no[0;0m
my $plain_text = $colour{white};                                my $plain_text = $colour{white};[0;0m
my $file_old   = $colour{red};                                  my $file_old   = $colour{red};[0;0m
my $file_new   = $colour{blue};                                 my $file_new   = $colour{blue};[0;0m
my $diff_stuff = $colour{magenta};                              my $diff_stuff = $colour{magenta};[0;0m
my $cvs_stuff  = $colour{green};                                my $cvs_stuff  = $colour{green};[0;0m
[0;0m
# Locations for personal and system-wide colour configuration   # Locations for personal and system-wide colour configuration[0;0m
my $HOME   = $ENV{HOME};                                        my $HOME   = $ENV{HOME};[0;0m
my $etcdir = '/etc';                                            my $etcdir = '/etc';[0;0m
[0;0m
my ($setting, $value);                                          my ($setting, $value);[0;0m
my @config_files = ("$etcdir/colordiffrc", "$HOME/.colordiffr   my @config_files = ("$etcdir/colordiffrc", "$HOME/.colordiffr[0;0m
my $config_file;                                                my $config_file;[0;0m
[0;0m
foreach $config_file (@config_files) {                          foreach $config_file (@config_files) {[0;0m
    if (open(COLORDIFFRC, "<$config_file")) {                       if (open(COLORDIFFRC, "<$config_file")) {[0;0m
        while (<COLORDIFFRC>) {                                         while (<COLORDIFFRC>) {[0;0m
            chop;                                                           chop;[0;0m
            next if (/^#/ || /^$/);                                         next if (/^#/ || /^$/);[0;0m
            s/\s+//g;                                                       s/\s+//g;[0;0m
            ($setting, $value) = split ('=');                               ($setting, $value) = split ('=');[0;0m
            if (!defined $value) {                                          if (!defined $value) {[0;0m
                print STDERR "Invalid configuration line ($_)                   print STDERR "Invalid configuration line ($_)[0;0m
                next;                                                           next;[0;0m
            }                                                               }[0;0m
            if ($setting eq 'banner') {                                     if ($setting eq 'banner') {[0;0m
                if ($value eq 'no') {                                           if ($value eq 'no') {[0;0m
                    $show_banner = 0;                                               $show_banner = 0;[0;0m
                }                                                               }[0;0m
                next;                                                           next;[0;0m
            }                                                               }[0;0m
            $setting =~ tr/A-Z/a-z/;                                        $setting =~ tr/A-Z/a-z/;[0;0m
            $value =~ tr/A-Z/a-z/;                                          $value =~ tr/A-Z/a-z/;[0;0m
            if (!defined $colour{$value}) {                                 if (!defined $colour{$value}) {[0;0m
                print STDERR "Invalid colour specification ($                   print STDERR "Invalid colour specification ($[0;0m
                next;                                                           next;[0;0m
            }                                                               }[0;0m
            if ($setting eq 'plain') {                                      if ($setting eq 'plain') {[0;0m
                $plain_text = $colour{$value};                                  $plain_text = $colour{$value};[0;0m
            }                                                               }[0;0m
            elsif ($setting eq 'oldtext') {                                 elsif ($setting eq 'oldtext') {[0;0m
                $file_old = $colour{$value};                                    $file_old = $colour{$value};[0;0m
            }                                                               }[0;0m
            elsif ($setting eq 'newtext') {                                 elsif ($setting eq 'newtext') {[0;0m
                $file_new = $colour{$value};                                    $file_new = $colour{$value};[0;0m
            }                                                               }[0;0m
            elsif ($setting eq 'diffstuff') {                               elsif ($setting eq 'diffstuff') {[0;0m
                $diff_stuff = $colour{$value};                                  $diff_stuff = $colour{$value};[0;0m
            }                                                               }[0;0m
            elsif ($setting eq 'cvsstuff') {                                elsif ($setting eq 'cvsstuff') {[0;0m
                $cvs_stuff = $colour{$value};                                   $cvs_stuff = $colour{$value};[0;0m
            }                                                               }[0;0m
            else {                                                          else {[0;0m
                print STDERR "Unknown option in $config_file:                   print STDERR "Unknown option in $config_file:[0;0m
            }                                                               }[0;0m
        }                                                               }[0;0m
        close COLORDIFFRC;                                              close COLORDIFFRC;[0;0m
    }                                                               }[0;0m
}                                                               }[0;0m
[0;0m
# colordiff specfic options here.  Need to pre-declare if usi   # colordiff specfic options here.  Need to pre-declare if usi[0;0m
[0;0m
# -----------------------------------------------------------   # -----------------------------------------------------------[0;0m
# FIXME                                                         # FIXME[0;0m
#                                                               #[0;0m
# Remove this (contributed) code for now - the long options b   # Remove this (contributed) code for now - the long options b[0;0m
# of extra diff options supplied on the command line.  On bal   # of extra diff options supplied on the command line.  On bal[0;0m
# diff options is probably more important than having colordi   # diff options is probably more important than having colordi[0;0m
# on the command line.                                          # on the command line.[0;0m
#                                                               #[0;0m
# Need to find a proper fix for this so that this can be rein   # Need to find a proper fix for this so that this can be rein[0;0m
[0;0m
###  GetOptions(                                                ###  GetOptions([0;0m
###      "no-banner" => sub { $show_banner = 0 },               ###      "no-banner" => sub { $show_banner = 0 },[0;0m
###      "plain-text=s" => \&set_color,                         ###      "plain-text=s" => \&set_color,[0;0m
###      "file-old=s"   => \&set_color,                         ###      "file-old=s"   => \&set_color,[0;0m
###      "file-new=s"   => \&set_color,                         ###      "file-new=s"   => \&set_color,[0;0m
###      "cvs-stuff=s"  => \&set_color,                         ###      "cvs-stuff=s"  => \&set_color,[0;0m
###      "diff-stuff=s" => \&set_color                          ###      "diff-stuff=s" => \&set_color[0;0m
###  );                                                         ###  );[0;0m
# -----------------------------------------------------------   # -----------------------------------------------------------[0;0m
[0;0m
if ($show_banner == 1) {                                        if ($show_banner == 1) {[0;0m
    print STDERR "$app_name $version ($app_www)\n";                 print STDERR "$app_name $version ($app_www)\n";[0;0m
    print STDERR "$copyright $author, $author_email\n\n";           print STDERR "$copyright $author, $author_email\n\n";[0;0m
}                                                               }[0;0m
[0;0m
my @inputstream;                                                my @inputstream;[0;0m
[0;0m
if (defined $ARGV[0]) {                                         if (defined $ARGV[0]) {[0;0m
    # More reliable way of pulling in arguments                     # More reliable way of pulling in arguments[0;0m
    open2(\*INPUTSTREAM, undef, "diff", @ARGV);                     open2(\*INPUTSTREAM, undef, "diff", @ARGV);[0;0m
    @inputstream = <INPUTSTREAM>;                                   @inputstream = <INPUTSTREAM>;[0;0m
    close INPUTSTREAM;                                              close INPUTSTREAM;[0;0m
}                                                               }[0;0m
else {                                                          else {[0;0m
    @inputstream = <STDIN>;                                         @inputstream = <STDIN>;[0;0m
}                                                               }[0;0m
[0;0m
# Input stream has been read - need to examine it               # Input stream has been read - need to examine it [0;0m
# to determine type of diff we have.                            # to determine type of diff we have.[0;0m
#                                                               #[0;0m
# This may not be perfect - should identify most reasonably     # This may not be perfect - should identify most reasonably[0;0m
# formatted diffs and patches                                   # formatted diffs and patches[0;0m
[0;0m
my $diff_type = 'unknown';                                      my $diff_type = 'unknown';[0;0m
my $record;                                                     my $record;[0;0m
[0;0m
DIFF_TYPE: foreach $record (@inputstream) {                     DIFF_TYPE: foreach $record (@inputstream) {[0;0m
    # Unified diffs are the only flavour having '+++' or '---       # Unified diffs are the only flavour having '+++' or '---[0;0m
    # at the start of a line                                        # at the start of a line[0;0m
    if ($record =~ /^(\+\+\+|---)/) {                               if ($record =~ /^(\+\+\+|---)/) {[0;0m
        $diff_type = 'diffu';                                           $diff_type = 'diffu';[0;0m
        last DIFF_TYPE;                                                 last DIFF_TYPE;[0;0m
    }                                                               }[0;0m
    # Context diffs are the only flavour having '***'               # Context diffs are the only flavour having '***'[0;0m
    # at the start of a line                                        # at the start of a line[0;0m
    elsif ($record =~ /^\*\*\*/) {                                  elsif ($record =~ /^\*\*\*/) {[0;0m
        $diff_type = 'diffc';                                           $diff_type = 'diffc';[0;0m
        last DIFF_TYPE;                                                 last DIFF_TYPE;[0;0m
    }                                                               }[0;0m
    # Plain diffs have NcN, NdN and NaN etc.                        # Plain diffs have NcN, NdN and NaN etc.[0;0m
    elsif ($record =~ /^[0-9,]+[acd][0-9,]+$/) {                    elsif ($record =~ /^[0-9,]+[acd][0-9,]+$/) {[0;0m
        $diff_type = 'diff';                                            $diff_type = 'diff';[0;0m
        last DIFF_TYPE;                                                 last DIFF_TYPE;[0;0m
    }                                                               }[0;0m
                                                              >     elsif ($record =~ /(\s\|\s|\s<$|\s>\s)/) {[0;0m
                                                              >         $diff_type = 'diffy';[0;0m
                                                              >         last DIFF_TYPE;[0;0m
                                                              >     }[0;0m
}                                                               }[0;0m
[0;0m
my $inside_file_old = 1;                                        my $inside_file_old = 1;[0;0m
[0;0m
foreach (@inputstream) {                                        foreach (@inputstream) {[0;0m
    if ($diff_type eq 'diff') {                                     if ($diff_type eq 'diff') {[0;0m
        if (/^</) {                                                     if (/^</) {[0;0m
            print "$file_old";                                              print "$file_old";[0;0m
        }                                                               }[0;0m
        elsif (/^>/) {                                                  elsif (/^>/) {[0;0m
            print "$file_new";                                              print "$file_new";[0;0m
        }                                                               }[0;0m
        elsif (/^[1-9]/) {                                              elsif (/^[1-9]/) {[0;0m
            print "$diff_stuff";                                            print "$diff_stuff";[0;0m
        }                                                               }[0;0m
        elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )           elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )[0;0m
            print "$cvs_stuff";                                             print "$cvs_stuff";[0;0m
        }                                                               }[0;0m
        else {                                                          else {[0;0m
            print "$plain_text";                                            print "$plain_text";[0;0m
        }                                                               }[0;0m
    }                                                               }[0;0m
    elsif ($diff_type eq 'diffc') {                                 elsif ($diff_type eq 'diffc') {[0;0m
        if (/^- /) {                                                    if (/^- /) {[0;0m
            print "$file_old";                                              print "$file_old";[0;0m
        }                                                               }[0;0m
        elsif (/^\+ /) {                                                elsif (/^\+ /) {[0;0m
            print "$file_new";                                              print "$file_new";[0;0m
        }                                                               }[0;0m
        elsif (/^\*{4,}/) {                                             elsif (/^\*{4,}/) {[0;0m
            print "$diff_stuff";                                            print "$diff_stuff";[0;0m
        }                                                               }[0;0m
        elsif (/^\*\*\* [0-9]+,[0-9]+/) {                               elsif (/^\*\*\* [0-9]+,[0-9]+/) {[0;0m
            print "$diff_stuff";                                            print "$diff_stuff";[0;0m
            $inside_file_old = 1;                                           $inside_file_old = 1;[0;0m
        }                                                               }[0;0m
        elsif (/^\*\*\* /) {                                            elsif (/^\*\*\* /) {[0;0m
            print "$file_old";                                              print "$file_old";[0;0m
        }                                                               }[0;0m
        elsif (/^--- [0-9]+,[0-9]+/) {                                  elsif (/^--- [0-9]+,[0-9]+/) {[0;0m
            print "$diff_stuff";                                            print "$diff_stuff";[0;0m
            $inside_file_old = 0;                                           $inside_file_old = 0;[0;0m
        }                                                               }[0;0m
        elsif (/^--- /) {                                               elsif (/^--- /) {[0;0m
            print "$file_new";                                              print "$file_new";[0;0m
        }                                                               }[0;0m
        elsif (/^!/) {                                                  elsif (/^!/) {[0;0m
            if ($inside_file_old == 1) {                                    if ($inside_file_old == 1) {[0;0m
                print "$file_old";                                              print "$file_old";[0;0m
            }                                                               }[0;0m
            else {                                                          else {[0;0m
                print "$file_new";                                              print "$file_new";[0;0m
            }                                                               }[0;0m
        }                                                               }[0;0m
        elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )           elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )[0;0m
            print "$cvs_stuff";                                             print "$cvs_stuff";[0;0m
        }                                                               }[0;0m
        else {                                                          else {[0;0m
            print "$plain_text";                                            print "$plain_text";[0;0m
        }                                                               }[0;0m
    }                                                               }[0;0m
    elsif ($diff_type eq 'diffu') {                                 elsif ($diff_type eq 'diffu') {[0;0m
        if (/^-/) {                                                     if (/^-/) {[0;0m
            print "$file_old";                                              print "$file_old";[0;0m
        }                                                               }[0;0m
        elsif (/^\+/) {                                                 elsif (/^\+/) {[0;0m
            print "$file_new";                                              print "$file_new";[0;0m
        }                                                               }[0;0m
        elsif (/^\@/) {                                                 elsif (/^\@/) {[0;0m
            print "$diff_stuff";                                            print "$diff_stuff";[0;0m
        }                                                               }[0;0m
        elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )           elsif (/^(Index: |={5,}|RCS file: |retrieving |diff )[0;0m
            print "$cvs_stuff";                                             print "$cvs_stuff";[0;0m
        }                                                               }[0;0m
        else {                                                          else {[0;0m
            print "$plain_text";                                            print "$plain_text";[0;0m
        }                                                               }[0;0m
    }                                                               }[0;0m
                                                              >     elsif ($diff_type eq 'diffy') {[0;0m
                                                              >         if (/\s<$/) {[0;0m
                                                              >             print "$file_old";[0;0m
                                                              >         }[0;0m
                                                              >         elsif (/\s\|\s/) {[0;0m
                                                              >             print "$diff_stuff";[0;0m
                                                              >         }[0;0m
                                                              >         elsif (/\s>\s/) {[0;0m
                                                              >             print "$file_new";[0;0m
                                                              >         }[0;0m
                                                              >         else {[0;0m
                                                              >             print "$plain_text";[0;0m
                                                              >         }[0;0m
                                                              >     }[0;0m
    s/$/$colour{OFF}/;                                              s/$/$colour{OFF}/;[0;0m
    print "$_";                                                     print "$_";[0;0m
}                                                               }[0;0m
[0;0m
sub set_color {                                               | #   FIXME - See earlier commented-out code[0;0m
    my ($type, $color) = @_;                                  | ### sub set_color {[0;0m
                                                              | ###     my ($type, $color) = @_;[0;0m
    $type =~ s/-/_/;                                          | ### [0;0m
    eval "\$$type = \$colour{$color}";                        | ###     $type =~ s/-/_/;[0;0m
}                                                             | ###     eval "\$$type = \$colour{$color}";[0;0m
                                                              > ### }[0;0m
Index: colordiff.xml[0;0m
===================================================================[0;0m
RCS file: /cvsroot/colordiff/colordiff/src/Attic/colordiff.xml,v[0;0m
retrieving revision 1.1.2.9[0;0m
diff --side-by-side -r1.1.2.9 colordiff.xml[0;0m
<?xml version="1.0" encoding="ISO-8859-1"?>                     <?xml version="1.0" encoding="ISO-8859-1"?>[0;0m
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//   <!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//[0;0m
 "/usr/share/sgml/docbook/dtd/xml/4.1.2/docbookx.dtd" [          "/usr/share/sgml/docbook/dtd/xml/4.1.2/docbookx.dtd" [[0;0m
 <!ENTITY diff "<command>diff</command>">                        <!ENTITY diff "<command>diff</command>">[0;0m
 <!ENTITY colordiff "<application>colordiff</application>">      <!ENTITY colordiff "<application>colordiff</application>">[0;0m
]>                                                              ]>[0;0m
[0;0m
<!-- mostly borrowed from bogofilter's bogofilter.xml file, o   <!-- mostly borrowed from bogofilter's bogofilter.xml file, o[0;0m
     by eric raymond -->                                             by eric raymond -->[0;0m
[0;0m
<refentry id='colordiff.1'>                                     <refentry id='colordiff.1'>[0;0m
  <refmeta>                                                       <refmeta>[0;0m
    <refentrytitle>colordiff</refentrytitle>                        <refentrytitle>colordiff</refentrytitle>[0;0m
    <manvolnum>1</manvolnum>                                        <manvolnum>1</manvolnum>[0;0m
  </refmeta>                                                      </refmeta>[0;0m
[0;0m
  <refnamediv id='name'>                                          <refnamediv id='name'>[0;0m
    <refname>colordiff</refname>                                    <refname>colordiff</refname>[0;0m
    <refpurpose>a tool to colorize &diff; output</refpurpose>       <refpurpose>a tool to colorize &diff; output</refpurpose>[0;0m
  </refnamediv>                                                   </refnamediv>[0;0m
[0;0m
<refsynopsisdiv id='synopsis'>                                  <refsynopsisdiv id='synopsis'>[0;0m
  <cmdsynopsis>                                                   <cmdsynopsis>[0;0m
    <command>colordiff</command>                                    <command>colordiff</command>[0;0m
    <arg><replaceable>&diff; options</replaceable></arg>            <arg><replaceable>&diff; options</replaceable></arg>[0;0m
    <arg choice='req'><replaceable>file1</replaceable></arg>        <arg choice='req'><replaceable>file1</replaceable></arg>[0;0m
    <arg choice='req'><replaceable>file2</replaceable></arg>        <arg choice='req'><replaceable>file2</replaceable></arg>[0;0m
  </cmdsynopsis>                                                  </cmdsynopsis>[0;0m
</refsynopsisdiv>                                               </refsynopsisdiv>[0;0m
[0;0m
<refsect1 id='description'><title>Description</title>           <refsect1 id='description'><title>Description</title>[0;0m
[0;0m
<para>&colordiff; is a wrapper for &diff; and produces the sa   <para>&colordiff; is a wrapper for &diff; and produces the sa[0;0m
&diff; but with coloured syntax highlighting at the command l   &diff; but with coloured syntax highlighting at the command l[0;0m
readability. The output is similar to how a &diff;-generated    readability. The output is similar to how a &diff;-generated [0;0m
in <application>Vim</application> or <application>Emacs</appl   in <application>Vim</application> or <application>Emacs</appl[0;0m
appropriate syntax highlighting options enabled. The colour s   appropriate syntax highlighting options enabled. The colour s[0;0m
read from a central configuration file or from a local user     read from a central configuration file or from a local user[0;0m
<filename>~/.colordiffrc</filename> file.</para>                <filename>~/.colordiffrc</filename> file.</para>[0;0m
[0;0m
<para>&colordiff; makes use of ANSI colours and as such will    <para>&colordiff; makes use of ANSI colours and as such will [0;0m
ANSI colours can be used - typical examples are xterms and Et   ANSI colours can be used - typical examples are xterms and Et[0;0m
console sessions.</para>                                        console sessions.</para>[0;0m
[0;0m
<para>&colordiff; has been tested on various flavours of Linu   <para>&colordiff; has been tested on various flavours of Linu[0;0m
OpenBSD, but should be broadly portable to other systems.</pa   OpenBSD, but should be broadly portable to other systems.</pa[0;0m
[0;0m
</refsect1>                                                     </refsect1>[0;0m
[0;0m
<refsect1 id="usage"><title>Usage</title>                       <refsect1 id="usage"><title>Usage</title>[0;0m
[0;0m
<para>Use &colordiff; wherever you would normally use &diff;,   <para>Use &colordiff; wherever you would normally use &diff;,[0;0m
to &colordiff;:</para>                                          to &colordiff;:</para>[0;0m
[0;0m
<para>For example:                                              <para>For example:[0;0m
[0;0m
<screen>                                                        <screen>[0;0m
$ colordiff file1 file2                                         $ colordiff file1 file2[0;0m
$ diff -u file1 file2 | colordiff                               $ diff -u file1 file2 | colordiff[0;0m
</screen>                                                       </screen>[0;0m
[0;0m
</para>                                                         </para>[0;0m
[0;0m
<para>You can pipe the output to 'less', using the '-R' optio   <para>You can pipe the output to 'less', using the '-R' optio[0;0m
terminal types may get better results using '-r' instead), wh   terminal types may get better results using '-r' instead), wh[0;0m
the colour escape sequences, otherwise displayed incorrectly    the colour escape sequences, otherwise displayed incorrectly [0;0m
'less':                                                         'less':[0;0m
[0;0m
<screen>                                                        <screen>[0;0m
$ diff -u file1 file2 | colordiff | less -R                     $ diff -u file1 file2 | colordiff | less -R[0;0m
</screen>                                                       </screen>[0;0m
[0;0m
</para>                                                         </para>[0;0m
[0;0m
<para>You may find it useful to make &diff; automatically cal   <para>You may find it useful to make &diff; automatically cal[0;0m
<command>colordiff</command>. Add the following line to         <command>colordiff</command>. Add the following line to[0;0m
<filename>~/.bashrc</filename> (or equivalent):                 <filename>~/.bashrc</filename> (or equivalent):[0;0m
[0;0m
<screen>                                                        <screen>[0;0m
alias diff=colordiff                                            alias diff=colordiff[0;0m
</screen>                                                       </screen>[0;0m
[0;0m
</para>                                                         </para>[0;0m
[0;0m
<para>Any options passed to &colordiff; are passed through to   <para>Any options passed to &colordiff; are passed through to[0;0m
[0;0m
<para>Alternatively, a construct such as 'cvs diff SOMETHING    <para>Alternatively, a construct such as 'cvs diff SOMETHING [0;0m
included in <filename>~/.bashrc</filename> as follows:          included in <filename>~/.bashrc</filename> as follows:[0;0m
[0;0m
<screen>                                                        <screen>[0;0m
function cvsdiff () { cvs diff $@ | colordiff; }                function cvsdiff () { cvs diff $@ | colordiff; }[0;0m
</screen>                                                       </screen>[0;0m
[0;0m
</para>                                                         </para>[0;0m
[0;0m
<para>Or, combining the idea above using 'less':                <para>Or, combining the idea above using 'less':[0;0m
[0;0m
<screen>                                                        <screen>[0;0m
function cvsdiff () { cvs diff $@ | colordiff |less -R; }       function cvsdiff () { cvs diff $@ | colordiff |less -R; }[0;0m
</screen>                                                       </screen>[0;0m
[0;0m
</para>                                                         </para>[0;0m
[0;0m
<para>Note that the function name, cvsdiff, can be customized   <para>Note that the function name, cvsdiff, can be customized[0;0m
[0;0m
</refsect1>                                                     </refsect1>[0;0m
[0;0m
<refsect1 id='files'><title>Files</title>                       <refsect1 id='files'><title>Files</title>[0;0m
[0;0m
<variablelist><varlistentry>                                    <variablelist><varlistentry>[0;0m
  <term><filename>/etc/colordiffrc</filename></term>              <term><filename>/etc/colordiffrc</filename></term>[0;0m
  <listitem><para>Central configuration file. User-specific s     <listitem><para>Central configuration file. User-specific s[0;0m
  enabled by copying this file to <filename>~/.colordiffrc</f     enabled by copying this file to <filename>~/.colordiffrc</f[0;0m
  making the appropriate changes.</para></listitem>               making the appropriate changes.</para></listitem>[0;0m
</varlistentry></variablelist>                                  </varlistentry></variablelist>[0;0m
[0;0m
</refsect1>                                                     </refsect1>[0;0m
[0;0m
<refsect1 id='bugs'><title>Bugs</title>                         <refsect1 id='bugs'><title>Bugs</title>[0;0m
[0;0m
<para>Bug reports and suggestions/patches to <email>davee@sun   <para>Bug reports and suggestions/patches to <email>davee@sun[0;0m
please.</para>                                                  please.</para>[0;0m
[0;0m
<para>&colordiff; does not work for side-by-side diffs (<comm   <para>&colordiff; does not work for side-by-side diffs (<comm[0;0m
-y</command>). Note that <emphasis>does not work</emphasis> s   -y</command>). Note that <emphasis>does not work</emphasis> s[0;0m
the resulting output will not be colour-highlighted -- correc   the resulting output will not be colour-highlighted -- correc[0;0m
still be produced.</para>                                       still be produced.</para>[0;0m
[0;0m
</refsect1>                                                     </refsect1>[0;0m
[0;0m
<refsect1 id='author'><title>Author</title>                     <refsect1 id='author'><title>Author</title>[0;0m
[0;0m
<para>&colordiff; is written and maintained by Dave Ewart       <para>&colordiff; is written and maintained by Dave Ewart[0;0m
<email>davee@sungate.co.uk</email>. This manual page and the    <email>davee@sungate.co.uk</email>. This manual page and the[0;0m
source XML was written by Graham Wilson <email>bob@decoy.wox. | source XML was written by Graham Wilson <email>graham@mknod.o[0;0m
Debian and is maintained by the author.  Graham Wilson also m   Debian and is maintained by the author.  Graham Wilson also m[0;0m
package for &colordiff;.</para>                                 package for &colordiff;.</para>[0;0m
[0;0m
</refsect1>                                                     </refsect1>[0;0m
[0;0m
</refentry>                                                     </refentry>[0;0m
<!-- vim:set ts=2 sw=2 et: -->                                  <!-- vim:set ts=2 sw=2 et: -->[0;0m
